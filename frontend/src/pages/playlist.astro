---
import Layout from "../layouts/Layout.astro";

// Pre-existing array with song data structure
const songs = [
  [
    {
      "title": "back to friends",
      "artist": "sombr",
      "popularity": 99,
      "link": "https://open.spotify.com/track/0FTmksd2dxiE5e3rWyJXs6"
    },
    99
  ],
  [
    {
      "title": "undressed",
      "artist": "sombr",
      "popularity": 95,
      "link": "https://open.spotify.com/track/4AajxCEwGEsmHmT4H1TwjY"
    },
    95
  ],
  [
    {
      "title": "No One Noticed",
      "artist": "The Marías",
      "popularity": 92,
      "link": "https://open.spotify.com/track/2QqQzWjGLJ1QOcJ2sm1nYY"
    },
    92
  ],
  [
    {
      "title": "Cariño",
      "artist": "The Marías",
      "popularity": 88,
      "link": "https://open.spotify.com/track/4iW5JJy6xAd5uY5dGxmcfl"
    },
    88
  ],
  [
    {
      "title": "Hold It Together",
      "artist": "The Marías",
      "popularity": 85,
      "link": "https://open.spotify.com/track/6gSI0bwJSP5aEPJ7lCrqrT"
    },
    85
  ],
  [
    {
      "title": "I Don't Know You",
      "artist": "The Marías",
      "popularity": 82,
      "link": "https://open.spotify.com/track/4c7OLf2cmi7FkFpwvnAzhG"
    },
    82
  ]
];

---

<Layout>
  <div class="bg-white text-black font-sans min-h-screen px-6 py-12">
    <div class="max-w-7xl mx-auto">
      <div class="mb-10">
        <h1 class="text-4xl font-extrabold mb-2 tracking-tight">Your Music Recommendations</h1>
        <p class="text-lg text-gray-600">Songs curated based on your journal entries</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {songs.map((songData: any, index: number) => {
          const song = songData[0]; // Extract the song object from [songObject, score]
          const score = songData[1]; // Extract the score
          return (
            <div 
              class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm transition-shadow duration-300"
              data-song-index={index}
            >
              <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                  <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">{song.title}</h3>
                    <p class="text-sm text-gray-600">{song.artist}</p>
                  </div>
                  <div class="flex flex-col items-end">
                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">
                      {song.popularity}% Appeal
                    </span>
                  </div>
                </div>
                
                <div class="flex justify-between items-center group">
                  <a 
                    href={song.link} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="inline-flex items-center px-4 py-2 text-black hover:text-white text-sm rounded-lg hover:bg-black transition-colors"
                  >
                    <div class="w-4 h-4 mr-2 bg-contain bg-no-repeat bg-center" style="background-image: url('/Logo.png');" data-white-logo="/Logo-white.png"></div>
                    Open in Spotify
                  </a>
                  
                  <button 
                    class="p-2 text-gray-400 hover:text-gray-600 transition-colors"
                    aria-label="Share song"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  </div>

  <style>
    .group:hover .bg-contain {
      background-image: url('/Logo-white.png') !important;
    }
  </style>
</Layout>
